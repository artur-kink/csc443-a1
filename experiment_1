#!/bin/bash

echo "Generating tests."
echo -e "Records\tPage\tWrite\tRead"
csvsizes=(100 1000 10000 100000 1000000)

for i in "${csvsizes[@]}"
do
    file="rand$i.csv"
    if ! [ -e $file ]
    then
        python mkcsv.py $file $i >/dev/null
    fi

    page_file="rand$i.page"
    page_sizes=(1001 8001 16002 32004 64008)
    for p in "${page_sizes[@]}"
    do
        write_time=$(./write_fixed_len_pages $file $page_file $p | tail -n 1)
        write_time=${write_time:6}
        read_time=$(./read_fixed_len_page $page_file $p | tail -n 1)
        read_time=${read_time:6}
        echo -e "$i\t$p\t$write_time\t$read_time"
    done

done